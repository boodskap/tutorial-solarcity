{"type":3,"data":{"lang":"GROOVY","code":"\ndef query = String.format('{\\\"from\\\":%d, \\\"size\\\":%d}', (int)args.from, (int)args.size);\ndef res = record.search((long)args.rid, query);\ndef resp = [];\n\nif(null != res.hits.hits){\n    \n    for(int i=0;i<res.hits.hits.size();i++){\n        def rec = res.hits.hits[i]._source;\n        \n        if(null != rec.location){\n            def loc = [lon:rec.location[0], lat:rec.location[1]];\n            rec.location = loc;\n        }\n        rec.id = res.hits.hits[i]._id;\n        resp.add(rec);\n    }\n}\n\nreturn resp;\n\n","name":"ListRecords"}}